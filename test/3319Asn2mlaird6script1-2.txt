SELECT datname FROM pg_database WHERE pg_get_userbyid(datdba) = current_user;
DROP DATABASE mlaird6assign2db;
create database mlaird6assign2db;
\c mlaird6assign2db;


REVOKE CONNECT ON DATABASE mlaird6assign2db FROM public;
GRANT CONNECT ON DATABASE mlaird6assign2db TO lreid, mshirpou, mfinnie3, mshermin, yliu888;

\dt




CREATE TABLE user (userID INT, licenseNum CHAR(6), vehicleType CHAR(3), pregnant TINYINT(1), disability TINYINT(1), PRIMARY KEY(userID));



CREATE TABLE parkingSession (sessionID INT, startTime DATETIME, endTime DATETIME, userID INT, spaceID INT, PRIMARY KEY (sessionID), FOREIGN KEY (userID) REFERENCES user(userID) ON DELETE CASCADE, FOREIGN KEY (spaceID) REFERENCES parkingSpace(spaceID) ON DELETE CASCADE); 

CREATE TABLE parkingLot (lotID INT, address CHAR(30), rate FLOAT, openTime TIME, openTime TIME, PRIMARY KEY (lotID), FOREIGN KEY (userID) REFERENCES user(userID) ON DELETE CASCADE, FOREIGN KEY (spaceID) REFERENCES parkingSpace(spaceID) ON DELETE CASCADE); 

CREATE TABLE parkingSpace (spaceID INT, occupancy TINYINT(1), type char(3), PRIMARY KEY (spaceID), FOREIGN KEY (lotID) REFERENCES parkingLot(lotID) ON DELETE CASCADE, FOREIGN KEY (reservationID) REFERENCES reservation(reservationID) ON DELETE CASCADE; 

CREATE TABLE reservation (reservationID INT, startTime DATETIME, endTime DATETIME, PRIMARY KEY (reservationID); 